{% extends "base.html" %}

{% block title %}Notificaciones{% endblock %}

{% block content %}
<div class="container mt-5 d-flex justify-content-center">
    <div class="notificaciones-container" style="width: 600px;">
        <div class="notificaciones-header d-flex justify-content-between align-items-center border-bottom pb-2 mb-3">
            <h5 class="text-success fw-bold">NOTIFICACIONES</h5>
            <div>
                <button class="btn btn-link text-decoration-none fw-bold me-3" onclick="seleccionarTodos()">Seleccionar todos</button>
                <button class="btn btn-danger fw-bold" onclick="eliminarSeleccionados()">Eliminar</button>
            </div>
        </div>

        {% if notificaciones %}
        <form id="formNotificaciones" method="POST">
            {% for noti in notificaciones %}
            <div class="notificacion d-flex align-items-center bg-light rounded mb-2 p-2 border">
                <input type="checkbox" class="check-noti me-2" name="ids" value="{{ noti.ID_Notificacion }}">
                <p class="mb-0">{{ noti.Titulo }}: {{ noti.Mensaje }}</p>
            </div>
            {% endfor %}
        </form>
        {% else %}
        <p class="text-center text-muted">No tienes notificaciones.</p>
        {% endif %}
    </div>
</div>

<style>
    .notificaciones-container { background: #fff; border-radius: 12px; padding: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.08);}
    .notificacion:hover { background: #eaf4e1; transform: scale(1.01); transition: 0.3s;}
    .check-noti { transform: scale(1.2);}
</style>

<script>
function seleccionarTodos() {
    document.querySelectorAll('.check-noti').forEach(chk => chk.checked = true);
}

function eliminarSeleccionados() {
    const seleccionadas = document.querySelectorAll('.check-noti:checked');
    if(seleccionadas.length === 0) {
        alert('No hay notificaciones seleccionadas.');
        return;
    }
    if(confirm('Â¿Deseas eliminar las notificaciones seleccionadas?')) {
        document.getElementById('formNotificaciones').submit();
    }
}
</script>
{% endblock %}
