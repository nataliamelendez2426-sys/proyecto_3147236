<section style="padding:80px 0; background:#fff;">
  <div class="container">
    <h2 class="text-center mb-5 fw-bold" style="font-size:2.2rem; color:#222;">
      Catálogo de productos
    </h2>
    <div class="row g-4">
      {% for p in productos %}
      <div class="col-lg-3 col-md-4 col-sm-6">
        <div class="card catalog-card h-100 border rounded-3 shadow-sm position-relative">
          
          <!-- Etiqueta de descuento (ejemplo 10%) -->
          {% if p.Descuento %}
          <span class="discount-badge">-{{ p.Descuento }}%</span>
          {% endif %}

          <!-- Imagen -->
          <div class="catalog-img-wrapper">
            {% if p.imagenes %}
              <img src="{{ p.imagenes[0].ruta }}" class="catalog-img" alt="{{ p.NombreProducto }}">
            {% else %}
              <img src="/static/img/placeholder.jpg" class="catalog-img" alt="Sin imagen">
            {% endif %}
          </div>

          <!-- Información del producto -->
          <div class="card-body d-flex flex-column">
            <h5 class="product-name">{{ p.NombreProducto }}</h5>

            <!-- Precio con descuento -->
            {% if p.Descuento %}
              {% set precio_final = p.PrecioUnidad - (p.PrecioUnidad * p.Descuento / 100) %}
              <p class="price mb-1">
                <span class="price-final">${{ "%.0f"|format(precio_final) }}</span>
                <span class="price-old">${{ "%.0f"|format(p.PrecioUnidad) }}</span>
              </p>
            {% else %}
              <p class="price mb-1">
                <span class="price-final">${{ "%.0f"|format(p.PrecioUnidad) }}</span>
              </p>
            {% endif %}

            <!-- Botón -->
            <a href="#" class="btn-add mt-auto">Agregar al carrito</a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>
<style>
  /* Estilos generales del catálogo */
section {
    padding: 80px 0;
    background-color: #f8f9fa; /* Un fondo claro y suave */
    color: #333;
}

.container {
    max-width: 1200px; /* Ancho máximo del contenido */
    margin: 0 auto;
    padding: 0 15px; /* Espaciado lateral */
}

h2.text-center.mb-5.fw-bold {
    font-size: 2.5rem; /* Tamaño de encabezado más grande */
    color: #2c3e50; /* Un color azul oscuro para el título */
    margin-bottom: 40px !important; /* Margen inferior más pronunciado */
    text-transform: uppercase; /* Texto en mayúsculas para destacar */
    letter-spacing: 1px; /* Espaciado entre letras */
}

/* Contenedor de productos */
.row.g-4 {
    --bs-gutter-x: 1.5rem; /* Ajuste del espaciado horizontal */
    --bs-gutter-y: 1.5rem; /* Ajuste del espaciado vertical */
}

/* Tarjeta de producto individual */
.col-lg-3.col-md-4.col-sm-6 {
    margin-bottom: var(--bs-gutter-y); /* Asegura el espaciado inferior */
}

.card.catalog-card {
    border: 1px solid #e0e0e0; /* Borde sutil */
    border-radius: 10px; /* Bordes redondeados más suaves */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); /* Sombra más suave y sutil */
    transition: transform 0.3s ease, box-shadow 0.3s ease; /* Transición para hover */
    overflow: hidden; /* Para contener la imagen y la etiqueta */
    position: relative;
    background-color: #fff;
    display: flex;
    flex-direction: column;
    height: 100%; /* Asegura que las tarjetas ocupen el mismo alto */
}

.card.catalog-card:hover {
    transform: translateY(-5px); /* Efecto de elevación al pasar el ratón */
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15); /* Sombra más pronunciada al pasar el ratón */
}

/* Etiqueta de descuento */
.discount-badge {
    position: absolute;
    top: 15px;
    left: 15px;
    background-color: #e74c3c; /* Rojo vibrante para descuentos */
    color: #fff;
    padding: 6px 12px;
    border-radius: 5px;
    font-weight: bold;
    font-size: 0.9rem;
    z-index: 10; /* Asegura que esté sobre la imagen */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

/* Contenedor de imagen */
.catalog-img-wrapper {
    width: 100%;
    height: 200px; /* Altura fija para las imágenes */
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: #eee; /* Fondo para cuando no hay imagen */
}

.catalog-img {
    width: 100%;
    height: 100%;
    object-fit: cover; /* Asegura que la imagen cubra el contenedor sin distorsionarse */
    display: block; /* Elimina espacio extra debajo de la imagen */
}

/* Información del producto */
.card-body {
    padding: 20px;
    flex-grow: 1; /* Permite que el cuerpo de la tarjeta ocupe el espacio restante */
    display: flex;
    flex-direction: column;
    justify-content: space-between; /* Distribuye el contenido para que el botón esté abajo */
}

.product-name {
    font-size: 1.2rem;
    font-weight: 600; /* Fuente semi-bold */
    color: #34495e; /* Un tono de azul oscuro para el nombre */
    margin-bottom: 10px;
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 2; /* Limita el nombre a 2 líneas */
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Precios */
.price {
    margin-bottom: 15px !important; /* Mayor margen inferior para el precio */
    font-size: 1.1rem;
    display: flex;
    align-items: center;
    gap: 10px; /* Espacio entre precios */
}

.price-final {
    font-size: 1.4rem;
    font-weight: bold;
    color: #27ae60; /* Verde para el precio final */
}

.price-old {
    font-size: 1rem;
    color: #95a5a6; /* Gris para el precio tachado */
    text-decoration: line-through; /* Tachado */
    opacity: 0.8;
}

/* Botón "Agregar al carrito" */
.btn-add {
    display: block;
    width: 100%;
    padding: 12px 20px;
    background-color: #3498db; /* Azul vibrante para el botón */
    color: #fff;
    text-align: center;
    text-decoration: none;
    border-radius: 6px;
    font-weight: bold;
    font-size: 1rem;
    transition: background-color 0.3s ease, transform 0.2s ease;
    margin-top: auto; /* Empuja el botón hacia abajo */
    border: none; /* Elimina borde por defecto */
    cursor: pointer;
}

.btn-add:hover {
    background-color: #2980b9; /* Un tono más oscuro al pasar el ratón */
    transform: translateY(-2px); /* Ligero efecto de movimiento */
    box-shadow: 0 2px 8px rgba(52, 152, 219, 0.4); /* Sombra sutil al pasar el ratón */
}

/* Media Queries para Responsividad */
@media (max-width: 992px) { /* Para pantallas medianas (tablets) */
    h2.text-center.mb-5.fw-bold {
        font-size: 2.2rem;
    }
    .col-lg-3 {
        flex: 0 0 auto;
        width: 50%; /* 2 columnas en tablets */
    }
}

@media (max-width: 768px) { /* Para pantallas pequeñas (móviles) */
    h2.text-center.mb-5.fw-bold {
        font-size: 2rem;
    }
    .col-lg-3,
    .col-md-4 {
        flex: 0 0 auto;
        width: 100%; /* 1 columna en móviles */
    }
    .card-body {
        padding: 15px;
    }
    .price {
        font-size: 1rem;
    }
    .price-final {
        font-size: 1.2rem;
    }
    .btn-add {
        padding: 10px 15px;
        font-size: 0.95rem;
    }
}
</style>